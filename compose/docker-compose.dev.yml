version: '3.8'

services:
  main_db:
    build:
      context: ../
      dockerfile: backend/docker/main_db/dev.dockerfile
    env_file: ../backend/env/main_db/dev.env
  
  cache_db:
    build:
      context: ../
      dockerfile: backend/docker/cache_db/dev.dockerfile
    sysctls:
      net.core.somaxconn: 1024

  main_api:
    build:
      context: ../
      dockerfile: backend/docker/main_api/dev.dockerfile
    command: ../backend/main_api/cmd/start_server/start_dev_server.sh
    env_file: ../backend/env/main_api/dev.env